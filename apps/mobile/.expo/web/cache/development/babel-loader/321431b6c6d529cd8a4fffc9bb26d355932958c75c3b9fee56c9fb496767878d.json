{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar QRScannerModal = function QRScannerModal(_ref) {\n  var visible = _ref.visible,\n    onClose = _ref.onClose,\n    onScan = _ref.onScan;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    scanned = _useState4[0],\n    setScanned = _useState4[1];\n  useEffect(function () {\n    var getBarCodeScannerPermissions = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var _yield$BarCodeScanner = yield BarCodeScanner.requestPermissionsAsync(),\n          status = _yield$BarCodeScanner.status;\n        setHasPermission(status === 'granted');\n      });\n      return function getBarCodeScannerPermissions() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    if (visible) {\n      getBarCodeScannerPermissions();\n      setScanned(false);\n    }\n  }, [visible]);\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref3) {\n    var type = _ref3.type,\n      data = _ref3.data;\n    if (scanned) return;\n    setScanned(true);\n    onScan(data);\n    onClose();\n  };\n  if (hasPermission === null) {\n    return _jsx(View, {});\n  }\n  if (hasPermission === false) {\n    return _jsx(Modal, {\n      visible: visible,\n      animationType: \"slide\",\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(Text, {\n          children: \"No access to camera\"\n        }), _jsx(Button, {\n          title: \"Close\",\n          onPress: onClose\n        })]\n      })\n    });\n  }\n  return _jsx(Modal, {\n    visible: visible,\n    animationType: \"slide\",\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(BarCodeScanner, {\n        onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n        style: StyleSheet.absoluteFillObject\n      }), _jsx(View, {\n        style: styles.overlay,\n        children: _jsx(Button, {\n          title: \"Cancel\",\n          onPress: onClose,\n          color: \"#FF0000\"\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    backgroundColor: '#000'\n  },\n  overlay: {\n    position: 'absolute',\n    bottom: 50,\n    left: 0,\n    right: 0,\n    alignItems: 'center'\n  }\n});\nexport default QRScannerModal;","map":{"version":3,"names":["React","useState","useEffect","View","Text","Modal","StyleSheet","Button","BarCodeScanner","jsx","_jsx","jsxs","_jsxs","QRScannerModal","_ref","visible","onClose","onScan","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","scanned","setScanned","getBarCodeScannerPermissions","_ref2","_asyncToGenerator","_yield$BarCodeScanner","requestPermissionsAsync","status","apply","arguments","handleBarCodeScanned","_ref3","type","data","animationType","children","style","styles","container","title","onPress","onBarCodeScanned","undefined","absoluteFillObject","overlay","color","create","flex","flexDirection","justifyContent","backgroundColor","position","bottom","left","right","alignItems"],"sources":["/Users/asearer/Documents/Projects/safety-suggestion-reporting-system/apps/mobile/src/components/QRScannerModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, Modal, StyleSheet, Button, Dimensions } from 'react-native';\nimport { BarCodeScanner, BarCodeScannerResult } from 'expo-barcode-scanner';\n\ninterface QRScannerModalProps {\n    visible: boolean;\n    onClose: () => void;\n    onScan: (data: string) => void;\n}\n\nconst QRScannerModal: React.FC<QRScannerModalProps> = ({ visible, onClose, onScan }) => {\n    const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n    const [scanned, setScanned] = useState(false);\n\n    useEffect(() => {\n        const getBarCodeScannerPermissions = async () => {\n            const { status } = await BarCodeScanner.requestPermissionsAsync();\n            setHasPermission(status === 'granted');\n        };\n\n        if (visible) {\n            getBarCodeScannerPermissions();\n            setScanned(false);\n        }\n    }, [visible]);\n\n    const handleBarCodeScanned = ({ type, data }: BarCodeScannerResult) => {\n        if (scanned) return;\n        setScanned(true);\n        onScan(data);\n        onClose();\n    };\n\n    if (hasPermission === null) {\n        return <View />;\n    }\n\n    if (hasPermission === false) {\n        return (\n            <Modal visible={visible} animationType=\"slide\">\n                <View style={styles.container}>\n                    <Text>No access to camera</Text>\n                    <Button title=\"Close\" onPress={onClose} />\n                </View>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal visible={visible} animationType=\"slide\">\n            <View style={styles.container}>\n                <BarCodeScanner\n                    onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\n                    style={StyleSheet.absoluteFillObject}\n                />\n                <View style={styles.overlay}>\n                    <Button title=\"Cancel\" onPress={onClose} color=\"#FF0000\" />\n                </View>\n            </View>\n        </Modal>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        flexDirection: 'column',\n        justifyContent: 'center',\n        backgroundColor: '#000',\n    },\n    overlay: {\n        position: 'absolute',\n        bottom: 50,\n        left: 0,\n        right: 0,\n        alignItems: 'center',\n    },\n});\n\nexport default QRScannerModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}